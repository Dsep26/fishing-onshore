<div class="container-fishingspot">

<h1><%= @fishspot.address %></h1>

<%# <div id='map' style='width: 400px; height: 300px;'></div>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYW1lZW5haDE0NyIsImEiOiJjbDlmYjM5ZjEwNW0zM29yeG12cWFha2VvIn0.nCfUZJuzLLaP6wPxGuVgFw';
    const map = new mapboxgl.Map({
      container: 'map', // container ID
      style: 'mapbox://styles/mapbox/streets-v11', // style URL
      center: [-74.5, 40], // starting position [lng, lat]
      zoom: 9, // starting zoom
      projection: 'globe' // display the map as a 3D globe
    });
    map.on('style.load', () => {
      map.setFog({}); // Set the default atmosphere style
    });
  </script> %>

  <div class="map", style="width: 100%; height: 55vh;"
    data-controller="map"
    data-map-marker-value="<%= @marker.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

  <%= link_to "Spot Info", fishing_spot_hints_path(@fishingspot), class: "btn btn-primary" %>
  <%= link_to "Discussions",  fishing_spot_discussions_path(@fishingspot), class: "btn btn-primary" %>

  <div class="box">
    <h2 style="text-align:center;"><%= @fishspot.address %>'s Fishing Condition</h2>
    <div class="weather-card">
      <div class="condition">
        <div class="img-icon">
          <img src="<%= @icon %>" alt="Weather Condition" class="icon">
        </div>
        <p class="text-weather"><%= @condition %></p>
      </div>
      <div class="temperature">
        <i class="fa-solid fa-temperature-half fa-3x"></i>
        <p class="text-weather"><%= @temperature %><%= @humidity %></p>
      </div>
      <div class="humidity">
        <i class="fa-solid fa-droplet fa-3x"></i>
        <p class="text-weather"><%= @humidity %></p>
      </div>
      <div class="wind">
        <i class="fa-solid fa-wind fa-3x"></i>
        <p class="text-weather">Speed: <%= @windspeed %> kph</p>
        <i class="fa-regular fa-compass fa-3x"></i>
        <p class="text-weather"><%= @winddirection %></p>
    </div>
  </div>
</div>
