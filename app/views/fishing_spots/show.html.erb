
<%= render "shared/navbar" %>

<div class="container-fishingspot">

<h1><%= @fishspot.address %></h1>

<%# <div id='map' style='width: 400px; height: 300px;'></div>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoiYW1lZW5haDE0NyIsImEiOiJjbDlmYjM5ZjEwNW0zM29yeG12cWFha2VvIn0.nCfUZJuzLLaP6wPxGuVgFw';
    const map = new mapboxgl.Map({
      container: 'map', // container ID
      style: 'mapbox://styles/mapbox/streets-v11', // style URL
      center: [-74.5, 40], // starting position [lng, lat]
      zoom: 9, // starting zoom
      projection: 'globe' // display the map as a 3D globe
    });
    map.on('style.load', () => {
      map.setFog({}); // Set the default atmosphere style
    });
  </script> %>

  <div class="map", style="width: 100%; height: 400px;"
    data-controller="map"
    data-map-marker-value="<%= @marker.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

  <%= link_to "Spot Info", fishing_spot_hints_path(@fishingspot), class: "btn btn-primary" %>
  
  <div class="box"> 
    <div class="hid-box">
      <h2><%= @fishspot.address %>'s Fishing Condition</h2>
      <img src="<%= @icon %>" alt="Weather Condition" width="60" height="60" class="center">
      <p class="condition">Weather Condition: <%= @condition %></p>
      <p class="temp">Temperature: <%= @temperature %> | Humidity: <%= @humidity %></p>
      <p class="wind">Wind Speed: <%= @windspeed %> | Wind Direction: <%= @winddirection %></p>
    </div>
  </div>
  <style>
      .center {
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  </style>
</div>
